# Система управления персоналом - Frontend

Frontend приложение для системы управления персоналом и департаментами, созданное на основе Java Spring Boot backend.

## Технологии

- **Next.js 15** - React фреймворк для веб-приложений
- **TypeScript** - Типизированный JavaScript
- **Material-UI (MUI)** - Библиотека компонентов UI
- **Axios** - HTTP клиент для API запросов
- **js-cookie** - Работа с cookies для JWT токенов

## Функциональность

### Аутентификация
- Регистрация пользователей
- Авторизация с JWT токенами
- Автоматическое сохранение токенов в cookies
- Защищенные маршруты

### Управление пользователями
- Просмотр списка пользователей с пагинацией
- Фильтрация по имени, фамилии, отчеству
- Создание новых пользователей (требует аутентификации)
- Редактирование существующих пользователей (требует аутентификации)
- Удаление пользователей (требует аутентификации)

### Управление департаментами
- Просмотр списка департаментов
- Просмотр сотрудников в каждом департаменте
- Создание новых департаментов (требует аутентификации)
- Редактирование департаментов (требует аутентификации)
- Удаление департаментов (требует аутентификации)

### Поиск
- Глобальный поиск по пользователям и департаментам
- Поиск с пагинацией
- Автоматический поиск при вводе (debounce)

## Структура проекта

```
app/
├── components/          # Переиспользуемые компоненты
│   ├── AppBar.tsx      # Навигационная панель
│   ├── LoginForm.tsx   # Форма входа
│   ├── RegisterForm.tsx # Форма регистрации
│   ├── SearchComponent.tsx # Компонент поиска
│   ├── UserManagement.tsx # Управление пользователями
│   └── DepartmentManagement.tsx # Управление департаментами
├── contexts/           # React контексты
│   └── AuthContext.tsx # Контекст аутентификации
├── services/           # API сервисы
│   ├── api.ts          # Базовый HTTP клиент
│   ├── authService.ts  # Сервис аутентификации
│   ├── userService.ts  # Сервис пользователей
│   ├── departmentService.ts # Сервис департаментов
│   └── searchService.ts # Сервис поиска
├── types/              # TypeScript типы
│   └── index.ts        # Основные типы данных
├── login/              # Страница входа
├── register/           # Страница регистрации
├── layout.tsx          # Корневой layout
└── page.tsx            # Главная страница
```

## API Endpoints

Приложение взаимодействует с следующими backend endpoints:

### Аутентификация
- `POST /api/v1/auth/login` - Авторизация
- `POST /api/v1/auth/registration` - Регистрация

### Пользователи
- `GET /api/v1/users` - Получение списка пользователей
- `GET /api/v1/users/public/{id}` - Получение пользователя по ID
- `POST /api/v1/users` - Создание пользователя
- `PUT /api/v1/users/{id}` - Обновление пользователя
- `DELETE /api/v1/users/{id}` - Удаление пользователя

### Департаменты
- `GET /api/v1/departments/public` - Получение списка департаментов
- `GET /api/v1/departments/public/{id}` - Получение департамента по ID
- `GET /api/v1/departments/public/{id}/users` - Получение пользователей департамента
- `POST /api/v1/departments` - Создание департамента
- `PUT /api/v1/departments/{id}` - Обновление департамента
- `DELETE /api/v1/departments/{id}` - Удаление департамента

### Поиск
- `GET /api/v1/search` - Глобальный поиск

## Установка и запуск

1. Установка зависимостей:
```bash
npm install
```

2. Запуск в режиме разработки:
```bash
npm run dev
```

3. Сборка для продакшена:
```bash
npm run build
```

4. Запуск продакшен сборки:
```bash
npm start
```

## Конфигурация

### API URL
Базовый URL для API настроен в файле `app/services/api.ts`:
```typescript
const BASE_URL = 'http://5.129.192.141:8080/api/v1';
```

### Аутентификация
JWT токены сохраняются в cookies с настройками:
- Срок действия: 7 дней
- Secure: только в production
- SameSite: strict

## Особенности реализации

1. **Только Material-UI компоненты** - Не используются собственные стили, только компоненты MUI
2. **JWT в cookies** - Токены сохраняются в cookies с `withCredentials: true`
3. **Многоиспользуемые компоненты** - Все компоненты разделены на переиспользуемые модули
4. **Типизация** - Полная типизация TypeScript на основе Java DTO классов
5. **Автоматический редирект** - При 401 ошибке автоматический редирект на страницу входа
6. **Responsive дизайн** - Адаптивный дизайн для мобильных устройств

## Требования к backend

Backend должен поддерживать CORS запросы и принимать cookies для аутентификации. Все endpoints должны возвращать данные в формате, соответствующем типам TypeScript в `app/types/index.ts`.
